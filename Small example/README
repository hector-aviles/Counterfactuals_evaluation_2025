

Rscript ./learning_BNs_problog.R ./train_fold_1.csv ./cBN_1.pl

Rscript ./learning_BNs_problog_without_AD.R ./train_fold_1.csv ./cBN_1_without_AD.pl

# Query 1
asus@asus-K45VD:~/source_code/HIRTMA_CRC2025/Small example$ WhatIf -q latent_collision -e action\(cruise\),True -e free_NE,False -e free_W,False -e latent_collision,True  -i action\(cruise\),False -i action\(keep\),False -i action\(change_to_left\),True ./cBN_1_without_AD.pl

[WARNING] aspmc: Query for atom true was proven true during grounding.
[WARNING] aspmc: Including it has a negative impact on performance.
[INFO] aspmc: Tree Decomposition #bags: 77 unfolded treewidth: 8 #vertices: 85
[INFO] aspmc: Preprocessing disabled
[INFO] aspmc:    Stats Compilation
[INFO] aspmc: ------------------------------------------------------------
[INFO] aspmc: Compilation time:         0.006656169891357422
[INFO] aspmc: Counting time:            0.0012204647064208984
[INFO] aspmc: ------------------------------------------------------------
[INFO] WhatIf:    Results
[INFO] WhatIf: ------------------------------------------------------------
[RESULT] WhatIf: latent_collision:     0.999001

problog query_1.pl -vd
[INFO] Output level: INFO
[INFO] Propagating evidence: 0.0001s
[INFO] Grounding: 0.0291s
[INFO] Cycle breaking: 0.0031s
[INFO] Compiling SDD: 0.0164s
[INFO] Total time: 0.0836s
latent_collision_i:     0.999001 

#######################################################

# Query 2

asus@asus-K45VD:~/source_code/HIRTMA_CRC2025/Small example$ WhatIf -q latent_collision -e action\(cruise\),True -e free_NE,False -e free_W,False -e latent_collision,True  -i action\(cruise\),True -i action\(keep\),False -i action\(change_to_left\),False ./cBN_1.pl

[WARNING] aspmc: Query for atom true was proven true during grounding.
[WARNING] aspmc: Including it has a negative impact on performance.
[INFO] aspmc: Tree Decomposition #bags: 77 unfolded treewidth: 8 #vertices: 85
[INFO] aspmc: Preprocessing disabled
[INFO] aspmc:    Stats Compilation
[INFO] aspmc: ------------------------------------------------------------
[INFO] aspmc: Compilation time:         0.006990194320678711
[INFO] aspmc: Counting time:            0.0011272430419921875
[INFO] aspmc: ------------------------------------------------------------
[INFO] WhatIf:    Results
[INFO] WhatIf: ------------------------------------------------------------
[RESULT] WhatIf: latent_collision:     1.0

problog query_2.pl -vd 
[INFO] Output level: INFO
[INFO] Propagating evidence: 0.0001s
[INFO] Grounding: 0.0282s
[INFO] Cycle breaking: 0.0031s
[INFO] Compiling SDD: 0.0164s
[INFO] Total time: 0.0825s
latent_collision_i:     0.9990009

#######################################################

# Query 3

asus@asus-K45VD:~/source_code/HIRTMA_CRC2025/Small example$ WhatIf -q latent_collision -e action\(change_to_left\),True -e free_NE,True -e free_W,False -e latent_collision,True  -i action\(cruise\),True -i action\(keep\),False -i action\(change_to_left\),False ./cBN_1.pl

[WARNING] aspmc: Query for atom true was proven true during grounding.
[WARNING] aspmc: Including it has a negative impact on performance.
[INFO] aspmc: Tree Decomposition #bags: 77 unfolded treewidth: 8 #vertices: 85
[INFO] aspmc: Preprocessing disabled
[INFO] aspmc:    Stats Compilation
[INFO] aspmc: ------------------------------------------------------------
[INFO] aspmc: Compilation time:         0.0051136016845703125
[INFO] aspmc: Counting time:            0.0011415481567382812
[INFO] aspmc: ------------------------------------------------------------
[INFO] WhatIf:    Results
[INFO] WhatIf: ------------------------------------------------------------
[RESULT] WhatIf: latent_collision:     0.125151

asus@asus-K45VD:~/source_code/HIRTMA_CRC2025/Small example$ problog query_3.pl -vd 
[INFO] Output level: INFO
[INFO] Propagating evidence: 0.0001s
[INFO] Grounding: 0.0289s
[INFO] Cycle breaking: 0.0032s
[INFO] Compiling SDD: 0.0166s
[INFO] Total time: 0.0771s
latent_collision_i:     0.125151 

#######################################################

# Query 4

asus@asus-K45VD:~/source_code/HIRTMA_CRC2025/Small example$ WhatIf -q latent_collision -e action\(change_to_left\),True -e free_NE,True -e free_W,False -e latent_collision,True  -i action\(cruise\),False -i action\(keep\),True -i action\(change_to_left\),False ./cBN_1.pl

[WARNING] aspmc: Query for atom true was proven true during grounding.
[WARNING] aspmc: Including it has a negative impact on performance.
[INFO] aspmc: Tree Decomposition #bags: 77 unfolded treewidth: 8 #vertices: 85
[INFO] aspmc: Preprocessing disabled
[INFO] aspmc:    Stats Compilation
[INFO] aspmc: ------------------------------------------------------------
[INFO] aspmc: Compilation time:         0.005505084991455078
[INFO] aspmc: Counting time:            0.0011532306671142578
[INFO] aspmc: ------------------------------------------------------------
[INFO] WhatIf:    Results
[INFO] WhatIf: ------------------------------------------------------------
[RESULT] WhatIf: latent_collision:     0.000999001

asus@asus-K45VD:~/source_code/HIRTMA_CRC2025/Small example$ problog query_4.pl -vd 
[INFO] Output level: INFO
[INFO] Propagating evidence: 0.0001s
[INFO] Grounding: 0.0292s
[INFO] Cycle breaking: 0.0031s
[INFO] Compiling SDD: 0.0230s
[INFO] Total time: 0.0835s
latent_collision_i:     0.000999001


install.packages("bnlearn")
install.packages("dplyr")
install.packages("stringr")
install.packages("tidyr")
install.packages("conflicted")
install.packages("tidyverse")
install.packages("arules")


I have a causal bayesian network coded as a probabilistic logic program. I use in some rules annotated disjunctions ot the type 0.3::a(1);0.7::a(2) :- b. This network is used as the base of a twin networks model for counterfactual reasoning. I know that structural causal models requires the use of error terms to introduce uncertainty handling in the causal "equations". I think the rule above should be:

0.3::u1.
a(1) :- b, \+ a(2), u1.

0.7::u2.
a(2) :- b, \+ a(1), u2.

What would be the effect of not unfold the rules and use annotated disjunctions instead?


